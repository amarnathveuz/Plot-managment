
    {% extends "super_admin/base9.html" %}

{% load static %}
    {% block content %}
    <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css">
    <div class="row">
       

    </div>
<form action="" method="POST" class="submit_action" enctype="multipart/form-data" name="frmUser">
    {% csrf_token %}
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12 px-0">
                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                    <!-- <h4 class="mb-sm-0">Payroll</h4> -->

                    <div class="page-title-left">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">User Management</a>
                            </li>
                            <li class="breadcrumb-item active"><a href="javascript: void(0);">New</a></li>

                        </ol>
                        <div class="margn">
                            <a onclick="validation_action()"><button type="submit" style="padding: 5px 10px !important;" class="btn btn-prim pay">
                                    Save
                                </button></a>
                            <a href="user_management"><button style="padding: 5px 10px !important;" type="button" class="btn btn-pri pay discard-payroll"> Discard
                                </button></a>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="row pay-main">
        
            
            <div class="col-lg-12 px-0">
                <div class="card noti-card" id="orderList">
    
    
                    <div class="card-body bb-0 pt-0 p-0">
                        <div>
    
                            <div class="payslip mb-5">
    
                                <div class="row pay-main mb-4">
    
                                    <div class="customer-head mb-4 col-md-12">
                                        <div class="propic">
                                            <div class="small-12 medium-2 large-2 columns">
                                                <div class="circle">
                                                    <img class="profile-pic" src="https://t3.ftcdn.net/jpg/03/46/83/96/360_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg">
                                                    <div class="p-image">
                                                        <i class="fa fa-camera upload-button" aria-hidden="true"></i>
                                                        <input  name="attachment" class="file-upload" type="file" accept="image/*">
                                                    </div>
                                                </div>
    
                                            </div>
                                        </div>
    
                                       
                                        <div class="cust-name row">
                                            <div class="col-md-1">
                                                <input  id="individual" type="radio" onclick="visible_manager('manager')" name="user_type"  value="manager"> <label
                                                    for="Individual">Manager</label><br>
                                            </div>
                                            <div class="col">
                                                <input  id="company" onclick="visible_manager('salesman')" name="user_type"  type="radio"  value="salesman"><label
                                                    for="company">Salesman</label><br>
                                            </div>
                                            <div class="col-md-12">
                                              <div class="row">
    
                                                <div class="col-md-4">
                                                    <input name="name" required type="text" placeholder="Name" class="form-control">
                                                </div>
                                              </div>
                                            </div>
    
                                        </div>
    
                                    </div>
                                        
                                 
                                    <div class="col-md-6 cust-details p-0">
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Phone</h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <input name="phone" required type="number" class="input form-control mt-2" >
    
                                                </div>
    
                                            </div>
    
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Mobile</h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <input name="mobile" required type="number" class="form-control" id="basiInput">
    
                                                </div>
                                            </div>
    
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Password Generate Option </h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <div class="">
                                                        <input onclick="password_select_function('automatically')" name="password_select" type="radio" value="Automatic" checked id="access">  &nbsp;Automatic
                            &nbsp;&nbsp;<input onclick="password_select_function('manual')" name="password_select" value="Manual"  type="radio" id="access" >&nbsp; Manual
                            <input style="display: none" id="manual_password_field" type="password" name="password"  placeholder="Enter password" class="form-control mt-2">
                                                    </div>
    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Property Access </h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <div class="">
                                                        <input id="access" type="radio" onclick="function_access_property('full_access')" name="property_access" value="all" checked> &nbsp;All access
                                                        &nbsp;  <input id="access"  type="radio" onclick="function_access_property('property_based')"  name="property_access" value="plot_based"> &nbsp;Plot based access
                                                    </div>
                                                    
    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6 style="display: none" id="property_id1">Select Property </h6>
                                            </div>
                                            <div style="display: none" id="property_id2" class="col-md-4 multipick">
                          
                                                <select name="selected_property_list[]" class="selectpicker" multiple aria-label="Default select example"
                                                    data-live-search="true">
                                                    {% for i in data_property %}
                                                    <option value="{{i.id}}">{{i.Name}} ({{i.UnitNo}})</option>
                                                  {% endfor %}
                                                </select>
                    
                                        </div>
                                        </div>
    
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6 id="manager_select_div" style="display: none">Select Manger</h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center " >
                                                <div class="form-group  required_item w-100" id="manager_select_div1" style="display: none">
                                                    <div class="">
                                                        <select name="manager" id="selected_manger_name"  class="form-control select2">
                                                            <option value="select">select manager</option>
                                    {% for i in manager_data %}
                                    
                                    <option value="{{i.id}}">{{i.name}} ({{i.email}})</option>
                                    
                                    
                                    {% endfor %}
                                    
                                                           </select>
                                                    </div>
                                                    
    
                                                </div>
                                            </div>
                                        </div>
    
                                    </div>
                                    <div class="col-md-6 cust-details p-0">
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Email</h6>
                                            </div>
                                            <div class="col-md-9 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <input name="email" required type="email" class="form-control" id="basiInput">
    
                                                </div>
                                            </div>
    
                                        </div>
    
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Emp ID</h6>
                                            </div>
                                            <div class="col-md-9 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <input name="empid" type="text" class="form-control" id="basiInput">
    
                                                </div>
                                            </div>
    
                                        </div>
    
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Plot Listview </h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <div class="">
                                                        <input type="radio" name="plot_list_view" checked value="no" id="access">&nbsp;No &nbsp;<input id="access" name="plot_list_view" type="radio" value="yes">&nbsp;Yes 
                                                    </div>
    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3 br-right d-flex align-items-center">
                                                <h6>Price Visibility </h6>
                                            </div>
                                            <div class="col-md-8 d-flex align-items-center">
                                                <div class="form-group  required_item w-100">
                                                    <div class="">
                                                        <input type="radio" name="price_visibility" checked value=1 id="access">&nbsp;Yes &nbsp;<input name="price_visibility" id="access" type="radio" value=0>&nbsp;No 
                                                    </div>
    
                                                </div>
                                            </div>
                                        </div>
    
                                    </div>
                                </div>
                              
    
                            </div>
    
    
    
                        </div>
    
    
    
    
                    </div>
                </div>
    
        
    
            </div>
        </div>
    </div>
</form>
<script src="{% static 'admin/js/jquery.min.js' %}"></script>

<script src="{% static 'admin/js/bootstrap.bundle.min.js' %}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js">
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js" defer></script>
    <script>

var user_type = ''

        $(document).ready(function() {
    $('.select2').select2({
    closeOnSelect: false
});
});
        function visible_manager(data){
           if(data == "manager"){
            user_type = 'manager'
            var x = document.getElementById('manager_select_div').style.display = "none";
            var x = document.getElementById('manager_select_div1').style.display = "none";
            var x = document.getElementById('prop1').style.display = "block";
            var x = document.getElementById('prop2').style.display = "block";
           }
           else{
            user_type = 'salesman'
            var x = document.getElementById('manager_select_div').style.display = "block";
            var x = document.getElementById('manager_select_div1').style.display = "block";
            var x = document.getElementById('prop1').style.display = "none";
            var x = document.getElementById('prop2').style.display = "none";
           }
           
        }
    </script>

    <script>

        function password_select_function(data){
            if(data == "manual"){
                var y = document.getElementById('manual_password_field').style.display = "block"

            }
            else{
                var y = document.getElementById('manual_password_field').style.display = "none"
            }
        }
    </script>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% if messages %}
   <script>
    {% for message in messages %}
        message1 = "{{message}}"
       

      
       
        if(message1 == "error"){

            Swal.fire({
  icon: 'error',
  title: 'Oops...',
  text: "{{ message }}",
 
})



        }
        else{

            Swal.fire(
				  '',
				  '{{ message }}',
				  '{{message.tags}}'
				)
      
        }
    {% endfor %}
   </script>
{% endif %}

<script>

$('#files').change(function(){
    document.getElementById("selected_image0").style.display = "none"
    document.getElementById("selected_image1").style.display = "block"

})

function image_remove_action(){
    document.getElementById("selected_image0").style.display = "block"
    document.getElementById("selected_image1").style.display = "none"
}
</script>

<script>
function validation_action(event){
    event.preventDefault()
    if(user_type == "manager"){

        document.forms["frmUser"].submit();
    }
    else if(user_type == "salesman"){
       
        var e = document.getElementById("selected_manger_name");
var value = e.options[e.selectedIndex].value;
if(value == "select"){
    alert("select manger")
}
else{
    document.forms["frmUser"].submit();
}
    }
}
    
</script>
<script>

    function function_access_property(data){
      
        if(data ==  'property_based'){
            $('#property_id1').show();
        $('#property_id2').show();
        }
        else{
            $('#property_id1').hide();
        $('#property_id2').hide();
        }
       
    }
</script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
    $(document).ready(function () {


        var readURL = function (input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('.profile-pic').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }


        $(".file-upload").on('change', function () {
            readURL(this);
        });

        $(".upload-button").on('click', function () {
            $(".file-upload").click();
        });
    });
</script>
    {% endblock %}