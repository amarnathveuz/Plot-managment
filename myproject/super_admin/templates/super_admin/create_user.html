
    {% extends "super_admin/base.html" %}

{% load static %}
    {% block content %}
<form action="" method="POST" class="submit_action" enctype="multipart/form-data" name="frmUser">
    {% csrf_token %}
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12 px-0">
                <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                    <!-- <h4 class="mb-sm-0">Payroll</h4> -->

                    <div class="page-title-left">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">User Management</a>
                            </li>
                            <li class="breadcrumb-item active"><a href="javascript: void(0);">New</a></li>

                        </ol>
                        <div class="margn">
                            <a onclick="validation_action()"><button type="submit" style="padding: 5px 10px !important;" class="btn btn-prim pay">
                                    Save
                                </button></a>
                            <a href="user_management"><button style="padding: 5px 10px !important;" type="button" class="btn btn-pri pay discard-payroll"> Discard
                                </button></a>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="row pay-main">
        
            
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Name</h6>
                    </div>
                    <div class="col-md-4">
                        <input name="name" required type="text" class="form-control">

                    </div>
                    <div id="selected_image0">
                        <style>

                            #files::-webkit-file-upload-button {
                        
                                visibility: hidden;
                        
                                user-select: none;
                        
                            }
                        
                        
                        
                            .file-input1 {
                        
                                display: none;
                        
                                user-select: none;
                        
                            }
                        
                        
                        
                            #files {
                        
                                display: none;
                        
                            }
                            </style>
                        <label for="files">

                            <img height="23px" width="23px"

                                style="margin-left:25px; cursor: pointer;width: 20%;
                                height: 1%;    margin: -21px 39px;"

                                src="{% static 'file_select.png' %}">

                        </label>

                        <input  class="file-input1" data-count=0 id="files"

                            name="attachment" type="file"

                             />

                    </div>
                    <div id="selected_image1" style="display: none">

                       <span onclick="image_remove_action()"><i   style="margin-left:25px; cursor: pointer;width: 20%;
                        height: 1%;    margin: -21px 39px;color:red;    font-weight: bold;" class="fa fa-times" aria-hidden="true"></i></span>
                    </div>
                    
                </div>
                <div class="row mt-2">
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>User Type </h6>
                    </div>
                    <div class="col-md-4">
                        <input type="radio" onclick="visible_manager('manager')" name="user_type"  value="manager"> &nbsp;Manager
                        &nbsp;&nbsp;<input onclick="visible_manager('salesman')" name="user_type"  type="radio"  value="salesman">&nbsp; Salesman
                    </div>
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Phone No</h6>
                    </div>
                    <div class="col-md-4">
                        <input name="phone" required type="number" class="form-control">

                    </div>
                   
                </div>
                <div class="row mt-2">
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Mobile </h6>
                    </div>
                    <div class="col-md-4">
                        <input name="mobile" required type="number" class="form-control" id="basiInput">
                    </div>
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Email</h6>
                    </div>
                    <div class="col-md-4">
                        <input name="email" required type="email" class="form-control" id="basiInput">
                    </div>
                   
                </div>
                <div class="row mt-2">
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Emp ID</h6>
                    </div>
                    <div class="col-md-4">
                        <input name="empid" type="text" class="form-control" id="basiInput">
                    </div>
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Password Generate Option</h6>
                    </div>
                    <div class="col-md-4">
                        <input onclick="password_select_function('automatically')" name="password_select" type="radio" value="Automatic" checked> &nbsp;Automatic
                        &nbsp;&nbsp;<input onclick="password_select_function('manual')" name="password_select" value="Manual"  type="radio" >&nbsp; Manual
                        <input style="display: none" id="manual_password_field" type="password" name="password"  placeholder="Enter password" class="form-control mt-2">
                    </div>

                    <div class="col-md-2 br-right d-flex align-items-center mt-4">
                        <h6>Plot Listview</h6>
                    </div>
                    <div class="col-md-4 mt-4">
                       <input type="radio" name="plot_list_view" checked value="no">&nbsp;No &nbsp;<input name="plot_list_view" type="radio" value="yes">&nbsp;Yes 
                    </div>
                    
                </div>
                

                <div class="row mt-2" id="manager_select_div" style="display: none">
                    <div class="col-md-2 br-right d-flex align-items-center">
                        <h6>Select Manger</h6>
                    </div>
                    <div class="col-md-4">
                       <select name="manager" id="selected_manger_name"  class="form-control select2">
                        <option value="select">select manager</option>
{% for i in manager_data %}

<option value="{{i.id}}">{{i.name}} ({{i.email}})</option>


{% endfor %}

                       </select>
                    </div>
                   
                </div>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js" defer></script>
    <script>

var user_type = ''

        $(document).ready(function() {
    $('.select2').select2({
    closeOnSelect: false
});
});
        function visible_manager(data){
           if(data == "manager"){
            user_type = 'manager'
            var x = document.getElementById('manager_select_div').style.display = "none";
           }
           else{
            user_type = 'salesman'
            var x = document.getElementById('manager_select_div').style.display = "block";
           }
           
        }
    </script>

    <script>

        function password_select_function(data){
            if(data == "manual"){
                var y = document.getElementById('manual_password_field').style.display = "block"

            }
            else{
                var y = document.getElementById('manual_password_field').style.display = "none"
            }
        }
    </script>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% if messages %}
   <script>
    {% for message in messages %}
        message1 = "{{message}}"
       

      
       
        if(message1 == "error"){

            Swal.fire({
  icon: 'error',
  title: 'Oops...',
  text: "{{ message }}",
 
})



        }
        else{

            Swal.fire(
				  '',
				  '{{ message }}',
				  '{{message.tags}}'
				)
      
        }
    {% endfor %}
   </script>
{% endif %}

<script>

$('#files').change(function(){
    document.getElementById("selected_image0").style.display = "none"
    document.getElementById("selected_image1").style.display = "block"

})

function image_remove_action(){
    document.getElementById("selected_image0").style.display = "block"
    document.getElementById("selected_image1").style.display = "none"
}
</script>

<script>
function validation_action(){
    event.preventDefault()
    if(user_type == "manager"){

        document.forms["frmUser"].submit();
    }
    else if(user_type == "salesman"){
       
        var e = document.getElementById("selected_manger_name");
var value = e.options[e.selectedIndex].value;
if(value == "select"){
    alert("select manger")
}
else{
    document.forms["frmUser"].submit();
}
    }
}
    
</script>
    {% endblock %}