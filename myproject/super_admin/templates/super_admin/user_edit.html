
    {% extends "super_admin/base.html" %}

    {% load static %}
        {% block content %}
    <form action="update_user_action" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="container-fluid mt-4">
            <div class="row">
                <div class="col-12 px-0">
                    <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                        <!-- <h4 class="mb-sm-0">Payroll</h4> -->
    
                        <div class="page-title-left">
                            <ol class="breadcrumb m-0">
                                <li class="breadcrumb-item"><a href="javascript: void(0);">User Management</a>
                                </li>
                                <li class="breadcrumb-item active"><a href="javascript: void(0);">Update User</a></li>
    
                            </ol>
                            <div class="margn">
                                <a><button type="submit" style="padding: 5px 10px !important;" class="btn btn-prim pay">
                                        Update
                                    </button></a>
                                <a href="#!"><button style="padding: 5px 10px !important;" type="button" class="btn btn-pri pay discard-payroll"> Discard
                                    </button></a>
                            </div>
    
                        </div>
    
                    </div>
                </div>
            </div>
            <div class="row pay-main">
            <input type="hidden" name="updated_id" value="{{data.id}}">
                
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Name</h6>
                        </div>
                        <div class="col-md-4">
                            <input name="name" value="{{data.name}}" required type="text" class="form-control">
    
                        </div>
                        <style>
    
                            #files::-webkit-file-upload-button {
                        
                                visibility: hidden;
                        
                                user-select: none;
                        
                            }
                        
                        
                        
                            .file-input1 {
                        
                                display: none;
                        
                                user-select: none;
                        
                            }
                        
                        
                        
                            #files {
                        
                                display: none;
                        
                            }
                            </style>

                        <div id="selected_image0" {% if data.atatchment == '' %} {% else %} style="display: none" {% endif %}>
                          
                            <label for="files">
    

                             


                             
                                <img height="23px" width="23px"
    
                                    style="margin-left:25px; cursor: pointer;width: 20%;
                                    height: 1%;    margin: -21px 39px;"
    
                                    src="{% static 'file_select.png' %}">
    
                            </label>
    
                            <input class="file-input1" data-count=0 id="files"
    
                                name="attachment" type="file"
    
                                 />

                               
    
                        </div>
                        {% if data.atatchment == ''  %}

                        {% else %}

                       <div id="image_div">
                        <img style="    margin-top: -14px!important;        width: 34%;" src="./media/{{data.atatchment}}">
                        <br>
                        <span onclick="remove_image_fun()" style="color: red;cursor: pointer;
                        font-weight: bold;    margin-left: 22px;"><i style="margin: 4px  7px!important;" class="fa fa-times" aria-hidden="true"></i></span>
                       </div>

                        {% endif %}
                        
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>User Type </h6>
                        </div>
                        <div class="col-md-4">
                            <input type="radio" onclick="visible_manager('manager')" {% if data.user_type == 'manager' %} checked  {% endif %} name="user_type" value="manager"> &nbsp;Manager
                            &nbsp;&nbsp;<input onclick="visible_manager('salesman')" {% if data.user_type == 'salesman' %} checked  {% endif %} name="user_type" type="radio"  value="salesman">&nbsp; Salesman
                        </div>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Phone No</h6>
                        </div>
                        <div class="col-md-4">
                            <input name="phone" value="{{data.phone}}" required type="number" class="form-control">
    
                        </div>
                       
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Mobile </h6>
                        </div>
                        <div class="col-md-4">
                            <input name="mobile" value="{{data.mobile}}" required type="number" class="form-control" id="basiInput">
                        </div>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Email</h6>
                        </div>
                        <div class="col-md-4">
                            <input name="email" value="{{data.email}}" required type="email" class="form-control" id="basiInput">
                        </div>
                       
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Emp ID</h6>
                        </div>
                        <div class="col-md-4">
                            <input name="empid" value="{{data.emp_id}}" type="text" class="form-control" id="basiInput">
                        </div>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Address 1</h6>
                        </div>
                        <div class="col-md-4">
                            <textarea name="address1" type="text" class="form-control" id="basiInput">{{data.address1}}</textarea>
                        </div>
                        
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Address 2 </h6>
                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            
                                <textarea name="address2" type="text" class="form-control" id="basiInput">{{data.address2}}</textarea>
                            
                        </div>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>City</h6>
                        </div>
                        <div class="col-md-4">
                            <input name="city" type="text" value="{{data.city}}" class="form-control" id="basiInput">
                        </div>
                        
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>State </h6>
                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            
                                <input name="state" value="{{data.state}}" type="text" class="form-control" id="basiInput">
                            
                        </div>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Country</h6>
                        </div>
                        <div class="col-md-4">
                            <input name="country" value="{{data.country}}" type="text" class="form-control" id="basiInput">
                        </div>
                        
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Zip </h6>
                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            
                            <input name="zip" value="{{data.zip}}" type="text" class="form-control" id="basiInput">
                            
                        </div>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Password change confirmation</h6>
                        </div>
                        <div class="col-md-4">
                            <input onclick="password_select_function('automatically')" name="password_select" type="radio" value="no" checked> &nbsp;no
                            &nbsp;&nbsp;<input onclick="password_select_function('manual')" name="password_select" value="yes"  type="radio" >&nbsp; yes
                            <input style="display: none" id="manual_password_field" type="password" name="password"  placeholder="Enter new password" class="form-control mt-2">
                        </div>
                       
                          
                     
                       
                    </div>
    
                    <div class="row mt-2" id="manager_select_div" {% if data.user_type == 'salesman' %} {% else %} style="display: none" {% endif %}>
                        <div class="col-md-2 br-right d-flex align-items-center">
                            <h6>Select Manger</h6>
                        </div>
                        <div class="col-md-4">
                           <select name="manager"  class="form-control select2">
                            {% if user_manger %}
                            <option value="{{user_manger.manager_id.id}}">{{user_manger.manager_id.name}} ({{user_manger.manager_id.email}})</option>

                            
                            {% else %}
                            <option value="">select manager</option>
                            {% endif %}
                            
    {% for i in all_manger %}
    
    {% if user_manger.manager_id.id == i.id %}

    {% else %}
    <option value="{{i.id}}">{{i.name}} ({{i.email}})</option>
    
    {% endif %}
    {% endfor %}
    
                           </select>
                        </div>
                       
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.8/js/select2.min.js" defer></script>
        <script>
            $(document).ready(function() {
        $('.select2').select2({
        closeOnSelect: false
    });
    });
            function visible_manager(data){
               if(data == "manager"){
                var x = document.getElementById('manager_select_div').style.display = "none";
               }
               else{
                var x = document.getElementById('manager_select_div').style.display = "block";
               }
               
            }
        </script>
    
        <script>
    
            function password_select_function(data){
                if(data == "manual"){
                    var y = document.getElementById('manual_password_field').style.display = "block"
    
                }
                else{
                    var y = document.getElementById('manual_password_field').style.display = "none"
                }
            }
        </script>
    
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    {% if messages %}
       <script>
        {% for message in messages %}
            message1 = "{{message}}"
           
    
          
           
            if(message1 == "error"){
    
                Swal.fire({
      icon: 'error',
      title: 'Oops...',
      text: "{{ message }}",
     
    })
    
    
    
            }
            else{
    
                Swal.fire(
                      '',
                      '{{ message }}',
                      '{{message.tags}}'
                    )
          
            }
        {% endfor %}
       </script>
    {% endif %}

    <script>

        function remove_image_fun(){
            $('#image_div').hide();
            $('#selected_image0').show();
        }
    </script>
        {% endblock %}